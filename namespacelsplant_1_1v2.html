<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LSPlant: lsplant::v2 Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LSPlant
   &#160;<span id="projectnumber">LSPosed Developers</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelsplant.html">lsplant</a></li><li class="navelem"><a class="el" href="namespacelsplant_1_1v2.html">v2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lsplant::v2 Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlsplant_1_1v2_1_1InitInfo.html">InitInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Information and configuration that are needed to call <a class="el" href="namespacelsplant_1_1v2.html#ac95beb3334bcb16f833f7c441d965850" title="Initialize LSPlant for the proceeding hook. It mainly prefetch needed symbols and hook some functions...">Init()</a>  <a href="structlsplant_1_1v2_1_1InitInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac95beb3334bcb16f833f7c441d965850"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#ac95beb3334bcb16f833f7c441d965850">Init</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, const <a class="el" href="structlsplant_1_1v2_1_1InitInfo.html">InitInfo</a> &amp;info)</td></tr>
<tr class="memdesc:ac95beb3334bcb16f833f7c441d965850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize LSPlant for the proceeding hook. It mainly prefetch needed symbols and hook some functions. The env should not have any restriction for accessing hidden APIs. You can obtain such a <a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> in <a class="el" href="jni_8h.html#aac0498b58a4bbbf42588d30433b4f8ea">JNI_OnLoad()</a>.  <a href="namespacelsplant_1_1v2.html#ac95beb3334bcb16f833f7c441d965850">More...</a><br /></td></tr>
<tr class="separator:ac95beb3334bcb16f833f7c441d965850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ac480b282d5a0366abc9db520a4a12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12">Hook</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> target_method, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> hooker_object, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> callback_method)</td></tr>
<tr class="memdesc:a39ac480b282d5a0366abc9db520a4a12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook a Java method by providing the <code>target_method</code> together with the context object <code>hooker_object</code> and its callback <code>callback_method</code>.  <a href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12">More...</a><br /></td></tr>
<tr class="separator:a39ac480b282d5a0366abc9db520a4a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a816d224639bb1e24a03a3f68313a1a4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#a816d224639bb1e24a03a3f68313a1a4f">UnHook</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> target_method)</td></tr>
<tr class="memdesc:a816d224639bb1e24a03a3f68313a1a4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unhook a Java function that is previously hooked.  <a href="namespacelsplant_1_1v2.html#a816d224639bb1e24a03a3f68313a1a4f">More...</a><br /></td></tr>
<tr class="separator:a816d224639bb1e24a03a3f68313a1a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b88de43b66d0388c7540dab659567ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#a8b88de43b66d0388c7540dab659567ba">IsHooked</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> method)</td></tr>
<tr class="memdesc:a8b88de43b66d0388c7540dab659567ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a Java function is hooked by LSPlant or not.  <a href="namespacelsplant_1_1v2.html#a8b88de43b66d0388c7540dab659567ba">More...</a><br /></td></tr>
<tr class="separator:a8b88de43b66d0388c7540dab659567ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca54c16331586ec49ec7215a9db2ed19"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#aca54c16331586ec49ec7215a9db2ed19">Deoptimize</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> method)</td></tr>
<tr class="memdesc:aca54c16331586ec49ec7215a9db2ed19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deoptimize a method to avoid hooked callee not being called because of inline.  <a href="namespacelsplant_1_1v2.html#aca54c16331586ec49ec7215a9db2ed19">More...</a><br /></td></tr>
<tr class="separator:aca54c16331586ec49ec7215a9db2ed19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8db717a554629346734dcaae194b54"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#aee8db717a554629346734dcaae194b54">GetNativeFunction</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> method)</td></tr>
<tr class="memdesc:aee8db717a554629346734dcaae194b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the registered native function pointer of a native function. It helps user to hook native methods directly by backing up the native function pointer this function returns and env-&gt;registerNatives another native function pointer.  <a href="namespacelsplant_1_1v2.html#aee8db717a554629346734dcaae194b54">More...</a><br /></td></tr>
<tr class="separator:aee8db717a554629346734dcaae194b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef99b1d0b149df7cb8376288e4c776e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#aef99b1d0b149df7cb8376288e4c776e6">MakeClassInheritable</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a5b236a554a9caf14a835f4e83b4c16b3">jclass</a> target)</td></tr>
<tr class="memdesc:aef99b1d0b149df7cb8376288e4c776e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a class inheritable. It will make the class non-final and make all its private constructors protected.  <a href="namespacelsplant_1_1v2.html#aef99b1d0b149df7cb8376288e4c776e6">More...</a><br /></td></tr>
<tr class="separator:aef99b1d0b149df7cb8376288e4c776e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03401db299c2430a83e5b97e2267081"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelsplant_1_1v2.html#ab03401db299c2430a83e5b97e2267081">MakeDexFileTrusted</a> (<a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *env, <a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> cookie)</td></tr>
<tr class="memdesc:ab03401db299c2430a83e5b97e2267081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a DexFile trustable so that it can access hidden APIs. This is useful because we likely need to access hidden APIs when hooking system methods. A concern of this function is that cookie of the DexFile maybe a hidden APIs. So get please get the needed <a class="el" href="jni_8h.html#a72513bd82c955054b04665c731aa662a">jfieldID</a> beforehand (like in JNI_OnLoad as <a class="el" href="namespacelsplant_1_1v2.html#ac95beb3334bcb16f833f7c441d965850" title="Initialize LSPlant for the proceeding hook. It mainly prefetch needed symbols and hook some functions...">Init()</a>).  <a href="namespacelsplant_1_1v2.html#ab03401db299c2430a83e5b97e2267081">More...</a><br /></td></tr>
<tr class="separator:ab03401db299c2430a83e5b97e2267081"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aca54c16331586ec49ec7215a9db2ed19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca54c16331586ec49ec7215a9db2ed19">&#9670;&nbsp;</a></span>Deoptimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::Deoptimize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deoptimize a method to avoid hooked callee not being called because of inline. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>The method to deoptimize. By deoptimizing the method, the method will back all callee without inlining. For example, if you hooked a short method B that is invoked by method A, and you find that your callback to B is not invoked after hooking, then it may mean A has inlined B inside its method body. To force A to call your hooked B, you can deoptimize A and then your hook can take effect. Generally, you need to find all the callers of your hooked callee and that can be hardly achieve (but you can still search all callers by using DexHelper). Use this function if you are sure the deoptimized callers are all you need. Otherwise, it would be better to change the hook point or to deoptimize the whole app manually (by simple reinstall the app without uninstalled). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Indicate whether the deoptimizing succeed or not. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It is safe to call deoptimizing on a hooked method because the deoptimization will perform on the backup method instead. </dd></dl>

</div>
</div>
<a id="aee8db717a554629346734dcaae194b54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee8db717a554629346734dcaae194b54">&#9670;&nbsp;</a></span>GetNativeFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* lsplant::v2::GetNativeFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the registered native function pointer of a native function. It helps user to hook native methods directly by backing up the native function pointer this function returns and env-&gt;registerNatives another native function pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>The native method to get the native function pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The native function pointer the <code>method</code> previously registered. If it has not been registered or it is not a native method, null is returned instead. </dd></dl>

</div>
</div>
<a id="a39ac480b282d5a0366abc9db520a4a12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39ac480b282d5a0366abc9db520a4a12">&#9670;&nbsp;</a></span>Hook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a> lsplant::v2::Hook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>target_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>hooker_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>callback_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hook a Java method by providing the <code>target_method</code> together with the context object <code>hooker_object</code> and its callback <code>callback_method</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. Must not be null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_method</td><td>The method id to the method you want to hook. Must not be null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hooker_object</td><td>The hooker object to store the context of the hook. The most likely usage is to store the <b>backup</b> method into it so that when <b>callback_method</b> is invoked, it can call the original method. Another scenario is that, for example, in Xposed framework, multiple modules can hook the same Java method and the <b>hooker_object</b> can be used to store all the callbacks to allow multiple modules work simultaneously without conflict. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback_method</td><td>The callback method to the <code>hooker_object</code> is used to replace the <code>target_method</code>. Whenever the <code>target_method</code> is invoked, the <code>callback_method</code> will be invoked instead of the original <code>target_method</code>. The signature of the <code>callback_method</code> must be: <div class="fragment"><div class="line"><span class="keyword">public</span> Object callback_method(Object []args)</div>
</div><!-- fragment --> That is, the return type must be <code>Object</code> and the parameter type must be <b>Object</b>[]. Behavior is undefined if the signature does not match the requirement. args[0] is the this object for non-static methods and there is NOT null this object placeholder for static methods. Extra info can be provided by defining member variables of <code>hooker_object</code>. This method must be a method to <code>hooker_object</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The backup method. You can invoke it by reflection to invoke the original method. null if fails. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function will automatically generate a stub class for hook. To help debug, you can set the generated class name, its field name, its source name and its method name by setting generated_* in <a class="el" href="structlsplant_1_1v2_1_1InitInfo.html">InitInfo</a>. </dd>
<dd>
This function thread safe (you can call it simultaneously from multiple thread) but it's not atomic to the same <b>target_method</b>. That means <a class="el" href="namespacelsplant_1_1v2.html#a816d224639bb1e24a03a3f68313a1a4f" title="Unhook a Java function that is previously hooked.">UnHook()</a> or <a class="el" href="namespacelsplant_1_1v2.html#a8b88de43b66d0388c7540dab659567ba" title="Check if a Java function is hooked by LSPlant or not.">IsHooked()</a> does not guarantee to work properly on the same <code>target_method</code> before it returns. Also, simultaneously call on this function with the same <code>target_method</code> does not guarantee only one will success. If you call this with different <code>hooker_object</code> on the same target_method simultaneously, the behavior is undefined. </dd>
<dd>
The behavior of getting the <a class="el" href="jni_8h.html#a91d8a65fefade9d27c9f749e69f37c40">jmethodID</a> of the backup method is undfined. </dd></dl>

</div>
</div>
<a id="ac95beb3334bcb16f833f7c441d965850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac95beb3334bcb16f833f7c441d965850">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structlsplant_1_1v2_1_1InitInfo.html">InitInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize LSPlant for the proceeding hook. It mainly prefetch needed symbols and hook some functions. The env should not have any restriction for accessing hidden APIs. You can obtain such a <a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> in <a class="el" href="jni_8h.html#aac0498b58a4bbbf42588d30433b4f8ea">JNI_OnLoad()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. Must not be null. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>The information for initialized. Basically, the info provides the inline hooker and unhooker together with a symbol resolver of libart.so to hook and extract needed native functions of ART. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Indicate whether initialization succeed. Behavior is undefined if calling other LSPlant interfaces before initialization or after a fail initialization. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structlsplant_1_1v2_1_1InitInfo.html" title="Information and configuration that are needed to call Init()">InitInfo</a>. </dd></dl>

</div>
</div>
<a id="a8b88de43b66d0388c7540dab659567ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b88de43b66d0388c7540dab659567ba">&#9670;&nbsp;</a></span>IsHooked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::IsHooked </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a Java function is hooked by LSPlant or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>The method to check if it was hooked or not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If <code>method</code> hooked, ture; otherwise, false. Please read <a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12" title="Hook a Java method by providing the target_method together with the context object hooker_object and ...">Hook()</a>'s note for more details. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12" title="Hook a Java method by providing the target_method together with the context object hooker_object and ...">Hook()</a> </dd></dl>

</div>
</div>
<a id="aef99b1d0b149df7cb8376288e4c776e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef99b1d0b149df7cb8376288e4c776e6">&#9670;&nbsp;</a></span>MakeClassInheritable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::MakeClassInheritable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a5b236a554a9caf14a835f4e83b4c16b3">jclass</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a class inheritable. It will make the class non-final and make all its private constructors protected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target</td><td>The target class that is to make inheritable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Indicate whether the operation has succeed. </dd></dl>

</div>
</div>
<a id="ab03401db299c2430a83e5b97e2267081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab03401db299c2430a83e5b97e2267081">&#9670;&nbsp;</a></span>MakeDexFileTrusted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::MakeDexFileTrusted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>cookie</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a DexFile trustable so that it can access hidden APIs. This is useful because we likely need to access hidden APIs when hooking system methods. A concern of this function is that cookie of the DexFile maybe a hidden APIs. So get please get the needed <a class="el" href="jni_8h.html#a72513bd82c955054b04665c731aa662a">jfieldID</a> beforehand (like in JNI_OnLoad as <a class="el" href="namespacelsplant_1_1v2.html#ac95beb3334bcb16f833f7c441d965850" title="Initialize LSPlant for the proceeding hook. It mainly prefetch needed symbols and hook some functions...">Init()</a>). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie</td><td>The cookie of the DexFile. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Indicate whether the operation has succeed. </dd></dl>

</div>
</div>
<a id="a816d224639bb1e24a03a3f68313a1a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a816d224639bb1e24a03a3f68313a1a4f">&#9670;&nbsp;</a></span>UnHook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lsplant::v2::UnHook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a056f21d50453765030dc191607e71228">JNIEnv</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="jni_8h.html#a0a43fa69ff4f987a8f30dfb8b61d818a">jobject</a>&#160;</td>
          <td class="paramname"><em>target_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unhook a Java function that is previously hooked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>The Java environment. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">target_method</td><td>The target method that is previously hooked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Indicate whether the unhook succeed. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Calling <code>backup</code> (the return method of <a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12" title="Hook a Java method by providing the target_method together with the context object hooker_object and ...">Hook()</a>) after unhooking is undefined behavior. Please read <a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12" title="Hook a Java method by providing the target_method together with the context object hooker_object and ...">Hook()</a>'s note for more details. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacelsplant_1_1v2.html#a39ac480b282d5a0366abc9db520a4a12" title="Hook a Java method by providing the target_method together with the context object hooker_object and ...">Hook()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
